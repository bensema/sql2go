package controller

import (
	"github.com/bensema/goadmin/global"
	"github.com/bensema/goadmin/server/http/internal"
	"github.com/gin-gonic/gin"
)

func (_this *ApiAuth) RegisterBBAdminRoute(g *gin.RouterGroup) {
{{range $key, $T := .}}
	g.GET("/api/v1/{{.TableName}}/pages", _this.{{.TableNameGoV2}}Pages)    
	g.POST("/api/v1/{{.TableName}}/add", _this.{{.TableNameGoV2}}Add)       
	g.POST("/api/v1/{{.TableName}}/del", _this.{{.TableNameGoV2}}Del)       
	g.GET("/api/v1/{{.TableName}}/query", _this.{{.TableNameGoV2}}Query)    
	g.POST("/api/v1/{{.TableName}}/update", _this.{{.TableNameGoV2}}Update) 
{{end}}

}

{{range $key, $T := .}}

func (_this *ApiAuth) {{.TableNameGoV2}}Pages(c *gin.Context) {
	reply, err := global.Srv.Find{{.TableNameGo}}Page(c)
	internal.AdminJSON(c, reply, err)
}

func (_this *ApiAuth) {{.TableNameGoV2}}Add(c *gin.Context) {
	reply, err := global.Srv.{{.TableNameGo}}Add(c)
	internal.AdminJSON(c, reply, err)
}

func (_this *ApiAuth) {{.TableNameGoV2}}Del(c *gin.Context) {
	reply, err := global.Srv.{{.TableNameGo}}Del(c)
	internal.AdminJSON(c, reply, err)
}

func (_this *ApiAuth) {{.TableNameGoV2}}Query(c *gin.Context) {
	reply, err := global.Srv.{{.TableNameGo}}Query(c)
	internal.AdminJSON(c, reply, err)
}

func (_this *ApiAuth) {{.TableNameGoV2}}Update(c *gin.Context) {
	reply, err := global.Srv.{{.TableNameGo}}Update(c)
	internal.AdminJSON(c, reply, err)
}

{{end}}